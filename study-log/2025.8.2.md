# LinuC Level 1 学習ログ | 2025年8月2日

## 🎯 本日の学習サマリー

今日は、新しいLinuxサーバーの初期設定を想定した、総合的なネットワーク設定のハンズオンを行った。ホスト名の設定、ipコマンドを使ったIPアドレスやデフォルトゲートウェイの設定、そして名前解決に関わる複数の設定ファイル（`/etc/hosts`, `/etc/resolv.conf`, `/etc/nsswitch.conf`）の編集と、一連の流れを実践した。

-   `hostnamectl`によるホスト名の設定
-   `ip`コマンドによるIPアドレスとルーティングの設定
-   `/etc/hosts`ファイルによる静的な名前解決
-   `/etc/resolv.conf`と`/etc/nsswitch.conf`による名前解決の順序制御

---

## 🤔 テーマ別：学びと考察

### 1. `ip`コマンドによるネットワーク設定

-   **以前の理解:**
    `ip a`でIPアドレスを確認できる、という程度の知識だった。設定を変更する方法は知らなかった。

-   **新たな学び:**
    -   `hostnamectl set-hostname`: システムのホスト名を恒久的に設定する、便利なコマンド。
    -   `ip addr add [IP/CIDR] dev [IF]`: ネットワークインターフェースにIPアドレスを設定する。
    -   `ip addr flush dev [IF]`: インターフェースに設定されたIPアドレス情報をクリアする。
    -   `ip route add default via [GW]`: デフォルトゲートウェイ（インターネットへの出口）を設定する。

-   **【気づき・思ったこと】**
    `hostnamectl`のように、ディストリビューションの違いを吸収してくれる新しいコマンドはとても便利だと感じた。また、`ip`コマンド一つでアドレス設定からルーティングまで幅広く操作できることを知り、その万能さに驚いた。

### 2. 名前の解決の仕組み

-   **以前の理解:**
    DNSサーバーが名前解決をすることは知っていたが、`/etc/hosts`との関係や、どちらが優先されるかを設定する方法は知らなかった。

-   **新たな学び:**
    -   `/etc/hosts`: IPアドレスとホスト名の対応を静的に記述するファイル。DNSより先に参照させることができる。
    -   `/etc/resolv.conf`: 参照するDNSサーバーを`nameserver [IP]`の書式で指定するファイル。
    -   `/etc/nsswitch.conf`: 名前の解決など、様々な情報の検索順序を定義するファイル。`hosts: files dns`と書くことで「hostsファイル → DNS」の順になる。
    -   `getent hosts [ホスト名]`: `nsswitch.conf`の設定に従って名前解決を試してくれる確認用コマンド。

-   **【気づき・思ったこと】**
    名前解決の裏側で、`/etc/nsswitch.conf`という司令塔のようなファイルが検索順序を制御している、という仕組みが一番の発見だった。3つのファイルが連携して初めて、意図した通りの名前解決が実現できるのだと理解した。

---

## 🚀 次のアクション

-   `/etc/nsswitch.conf`の`hosts:`の行を`dns files`と逆にしてみて、`getent hosts dbserver`の結果がどう変わるか（名前解決できなくなること）を確認する。
-   `ip route`で、デフォルトゲートウェイ以外の特定のネットワーク（例: `10.0.3.0/24`）への経路を追加する方法を調べてみる。
-   `hostnamectl`コマンドで、ホスト名以外にどのような情報が設定・確認できるか見てみる。
