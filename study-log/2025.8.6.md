# LinuC Level 1 学習ログ | 2025年8月6日

## 🎯 本日の学習サマリー

今日は、より実践的なユーザー・グループ管理と、ジョブスケジューリングをテーマに学習した。既存ユーザーの所属グループやホームディレクトリを変更する方法、`useradd`のデフォルト設定をカスタマイズする方法など、一歩進んだ管理手法を学んだ。さらに、`at`と`cron`を使い、1回限りのタスクや定期的なタスクを自動化するハンズオンに取り組んだ。

* 既存ユーザー・グループの変更 (`usermod`, `groupmod`)
* ユーザー作成のデフォルト設定 (`/etc/skel`, `/etc/default/useradd`)
* 1回限りのジョブ予約 (`at`, `atq`, `atrm`)
* 定期的なジョブ予約 (`cron`, `crontab -e/-l/-r`)

---

## 🤔 テーマ別：学びと考察

### 1. 応用的なユーザー・グループ管理

* **新たな学び:**
    * `usermod -d [新しいパス] -m [ユーザー名]`: ユーザーのホームディレクトリを変更し、中身も一緒に**移動(`-m`)**する。
    * `usermod -aG [グループ名] [ユーザー名]`: 既存の補助グループを維持したまま、新しいグループを**追加(`-a`)**する。`-a`を付けないと上書きされてしまう点が重要。
    * `groupmod -n [新しい名前] [古い名前]`: グループ名を変更する。
    * `/etc/skel`: 新規ユーザー作成時に、ホームディレクトリの**雛形（テンプレート）**として機能する。ここにファイルを置けば、全新規ユーザーに配布できる。
    * `/etc/passwd` と `/etc/shadow`: パスワード情報が別ファイルに分離されているのは、一般ユーザーに読み取り権限が必要な`/etc/passwd`から、暗号化されたパスワード情報を隠すためという、セキュリティ上の重要な理由がある。

* **【気づき・思ったこと】**
    `usermod`の`-m`や`-aG`オプションは、知っているといないとで大違いだと感じた。特に`-a`を付け忘れて補助グループを上書きしてしまうのは、実務でやりがちなミスなのだろうなと思った。

### 2. ジョブスケジューリング (`at`, `cron`)

* **新たな学び:**
    * **`at`**: 「**1回限り**」のタスクを予約する。`at now + 5 minutes`のように、自然な言葉で時間を指定できるのが便利。ジョブは`atq`で確認し、`atrm`で削除する。
    * **`cron`**: 「**繰り返し**」のタスクを予約する。`分 時 日 月 曜日`の5つのフィールドで実行タイミングを定義する。個人の設定は`crontab -e`で編集するのが作法。
    * `cron`でコマンドを指定する際は、`PATH`が通っていない可能性を考慮して`/bin/date`のように**フルパスで記述するのが安全**である。

* **【気づき・思ったこと】**
    `at`と`cron`の明確な使い分けが理解できた。`at`は「2時間後にサーバーを再起動したい」のような単発の作業に、`cron`は「毎朝4時にバックアップを取りたい」のような定型業務に使うイメージが掴めた。

---

## 🚀 次のアクション

* `useradd -D -s /bin/bash` を実行し、新規ユーザー作成時のデフォルトシェルを`/bin/bash`に変更してみる。
* `at`コマンドで、ジョブの実行結果をメールで受け取る設定を試してみる。
* `cron`を使い、「毎時0分に`df -h`（ディスク使用量）の結果を`/tmp/disk_usage.log`に追記する」ジョブを実際に設定し、数時間後にログが溜まっているか確認する。
