# LinuC Level 1 学習ログ | 2025年7月12日

## 🎯 本日の学習サマリー

本日は、Linuxシステムの根幹である**パッケージ管理**について、集中的に学習した。特に、これまで個別のコマンドとして暗記していたものを、思想や役割の観点から体系的に整理し直すことに注力した。

- Debian系 (`apt`, `dpkg`) と Red Hat系 (`yum`, `rpm`) の思想と役割分担
- 高レベルツール (`apt`, `yum`) と低レベルツール (`dpkg`, `rpm`) の関係性
- パッケージ操作における主要コマンドオプションの正確な理解
- 基本的なファイル・ディレクトリ操作 (`mkdir -p`, `tar`) の再確認

---

## 🤔 テーマ別：学びと考察

### 1. パッケージ管理の全体像 (高レベル vs 低レベル)

- **以前の理解と課題:**
  `apt` と `dpkg`、`yum` と `rpm`。これらを単に「Debian系で使うコマンド」「Red Hat系で使うコマンド」という並列の関係でしか捉えていなかった。なぜ2種類ずつ存在するのか、その理由を深く理解していなかった。

- **新たな学びと応用:**
  Linuxのパッケージ管理が**2層構造**になっている、というメンタルモデルを構築できた。
  - **低レベルツール (`dpkg`, `rpm`):**
    - `.deb` や `.rpm` という**単体のパッケージファイル**を直接操作するツール。
    - パッケージのインストール、削除、情報表示はできるが、**依存関係の解決はしてくれない**。
  - **高レベルツール (`apt`, `yum`/`dnf`):**
    - 低レベルツールのラッパー（包むもの）として機能する。
    - **リポジトリ**（パッケージの保管庫）の情報を管理し、**依存関係を自動で解決してくれる**のが最大の役割。
  **【応用】** この構造理解は、AWS EC2インスタンスのOS選定と運用に直結する。Amazon Linux 2 (Red Hat系) を使っているなら `yum` を、Ubuntu Server (Debian系) を使っているなら `apt` を使うのが基本。もし手動でダウンロードした `.rpm` ファイルをインストールする場合でも、依存関係の問題を避けるために `rpm -i` ではなく `yum localinstall` を使うべき、という判断ができる。

### 2. `rpm` コマンドオプションの整理

- **以前の理解と課題:**
  `-i` `-U` `-q` `-v` `-h` といった多くのオプションを、意味も分からず組み合わせて使っていた。特に、新規インストール (`-i`) とアップグレード (`-U`) の違いが曖昧だった。

- **新たな学びと応用:**
  主要なオプションを「動詞」と「副詞」のように整理した。
  - **動詞:** `-i` (install), `-U` (Upgrade), `-q` (query), `-e` (erase)
  - **副詞:** `-v` (verbose), `-h` (hash), `--test` (dry-run)
  特に重要なのは、`-U` はパッケージが存在しない場合は新規インストールしてくれるため、`-i` よりも安全で汎用性が高いということ。また、インストール前に `--test` オプションで事前チェックする習慣は、本番環境でのミスを防ぐ上で非常に重要だと学んだ。
  `rpm -ivh package.rpm` が「**I**nstall, **V**erbosely, with **H**ash marks」の略だと理解し、記憶が定着した。

### 3. Debian系パッケージ管理の深掘り

- **以前の理解と課題:**
  `apt-get update` と `apt-get upgrade` の違いを混同しがちだった。また `dpkg` コマンドの具体的な活用シーンが思い浮かばなかった。

- **新たな学びと応用:**
  - `apt-get update`: あくまで**ローカルのパッケージリストを最新にするだけ**。実際のパッケージは何も変わらない。
  - `apt-get upgrade`: `update`で最新化したリストを基に、**インストール済みのパッケージを実際にアップグレードする**。この2つは必ずセットで使う。
  - `dpkg-reconfigure`: **インストール済みのパッケージの初期設定を、もう一度やり直す**ための便利なコマンド。例えば、タイムゾーンを設定する `tzdata` パッケージなどで非常に役立つ。これは `apt` にはない `dpkg` ならではの機能。

---

## 🚀 次のアクション

- **EC2で実践:** AWS上でAmazon Linux 2とUbuntu Serverのt2.microインスタンスを両方起動する。それぞれのOSで、`yum`/`apt` を使って `htop` のようなツールをインストールし、その後アンインストールする、という一連の流れをコマンドを打ちながら体得する。
- **`mkdir -p` の体感:** `mkdir a/b/c` がエラーになり、`mkdir -p a/b/c` なら一発で成功することを実際に試し、`-p` (--parents) オプションのありがたみを実感する。
- **`tar` の復習:** 先日学んだ `tar` コマンドを使い、`tar -czvf archive.tar.gz directory/` で圧縮し、`tar -xzvf archive.tar.gz` で展開する練習を再度行い、知識を定着させる。