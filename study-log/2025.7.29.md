# LinuC Level 1 学習ログ | 2025年7月29日

## 🎯 本日の学習サマリー

今日は、昨日までに学んだシェルスクリプトの知識を総動員して、より多機能で安全なバックアップスクリプトの作成に挑戦した。引数の数や種類、ファイルの存在をチェックする高度なエラー処理や、10個以上の引数を正しく扱う方法など、プロが作るようなスクリプトの書き方を学んだ。

-   `if test`構文による数値・文字列・ファイルの比較
-   論理演算子（`-a`, `-o`, `!`）を使った条件の組み合わせ
-   コマンドの実行結果を変数に入れる方法（コマンド置換）
-   特殊変数（`$?`, `${10}`）の活用

---

## 🤔 テーマ別：学びと考察

### 1. `if test`構文による高度なエラーチェック

-   **以前の理解:**
    簡単な`if`文は使えたが、引数の数やファイルの種類を細かくチェックする方法は知らなかった。

-   **新たな学び:**
    -   `if [ $# -ne 2 ]`: 引数の数が2個ではない（not equal）場合に真となる条件式。
    -   `if [ ! -e "ファイル" ]`: `!`は否定を意味し、指定したファイルが存在しない（not exist）場合に真となる。
    -   `if [ ! -d "パス" ]`: 指定したパスがディレクトリではない（not directory）場合に真となる。
    -   `$?`: 直前に実行されたコマンドの終了ステータスを格納する特殊変数。成功なら`0`、失敗ならそれ以外。
    -   `if [ 条件1 -a 条件2 ]`: `-a`はANDを意味し、条件1と条件2の両方が正しい場合に真となる。

-   **【気づき・思ったこと】**
    スクリプトの冒頭で引数の数や種類を細かくチェックすることで、予期せぬエラーを防げるのだと学んだ。

### 2. 特殊変数とコマンド置換の活用

-   **以前の理解:**
    `$1`や`$#`といった基本的な特殊変数は知っていたが、その使い方を完全には理解していなかった。

-   **新たな学び:**
    -   `${10}`: 10番目以降の引数を扱う際は、変数名を波括弧`{}`で囲む必要がある。`$10`だと`$1`と`0`に分解されてしまう。
    -   `$(コマンド)`: コマンド置換。コマンドの実行結果を、その場に文字列として展開する。バックアップファイル名に日付を入れる際などに使う。

-   **【気づき・思ったこと】**
    `${10}`のように書き方が変わる点は、知らなければ絶対に気づけない落とし穴だと思った。また、`$(date)`のようにコマンドの実行結果をファイル名に組み込めるのは非常に便利で、スクリプトの可能性が大きく広がると感じた。

---

## 🚀 次のアクション

-   `super_backup.sh`を改造し、`-o`（OR）演算子を使って、バックアップ元が「ファイルでもディレクトリでもない」場合にエラーを出すようにしてみる。
-   `$*`と`$@`の違いについて調べ、それぞれ`for`ループで回したときに挙動がどう変わるか試すスクリプトを書いてみる。
-   バックアップが成功した時に、元のファイルを削除する（移動する`mv`コマンドを使う）オプションを追加する改造に挑戦してみる。